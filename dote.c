#include <stdio.h>
#include <unistd.h>

char a[16][16];
char b[16][16];
int color(int x);
void dote(int k,int l);
void dote2(int k,int l);

int main(){
    int l=0;
    while(1){
        for (int k = 0; k < 20; k++){ dote(k,l); }
        l=20;
        for (int k = 0; k < 20; k++){ dote2(k,l); }
        for (int k = 20; k > 0; k--){ dote(k,l); }
        l = 0;
        for (int k = 20; k > 0; k--){ dote2(k,l); }
    }
}

char a[16][16] = {
    { 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0},
    { 0, 0, 0, 0, 1, 1, 5,11,11,11, 5, 1, 1, 0, 0, 0},
    { 0, 0, 0, 1, 5,11,11,11,11,11,11,11, 5, 1, 0, 0},
    { 0, 0, 1, 5,11,11,11,11,11,11,11,11,11, 1, 0, 0},
    { 0, 0, 1,11,11,11,11,11,11,11,11,11,11, 5, 1, 0},
    { 0, 1,11,11,11,11,11,11,11, 1,11, 1,11, 5, 1, 0},
    { 1, 5,11,11,11,11,11,11,11, 1,11, 1,11,11,11, 1},
    { 1,11,11,11,11,11,11,11,11, 1,11, 1,11,11,11, 1},
    { 1,11,11,11, 5,11,11,11,11,11,11,11,11, 5,11, 1},
    { 1, 5,11,11, 5,11,11,11,11,11,11,11,11, 5,11, 1},
    { 0, 1, 5,11, 1, 5,11,11,11,11, 1,11,11, 1, 5, 1},
    { 0, 0, 1, 1, 1, 5,11,11,11,11,11,11, 5, 1, 1, 0},
    { 0, 0, 0, 1, 1, 1, 5, 5,11,11,11, 5, 1, 1, 0, 0},
    { 0, 0, 1, 5, 5, 5, 1, 1, 1, 1, 1, 1, 5, 5, 1, 0},
    { 0, 1, 5, 5, 5, 5, 5, 1, 1, 1, 1, 5, 5, 5, 5, 1},
    { 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 0}
};

char b[16][16] = {
    { 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 1, 1, 0, 0},
    { 0, 0, 0, 0, 1, 1, 5,11,11,11, 5, 1, 5,11, 1, 0},
    { 0, 0, 0, 1, 5,11,11,11,11,11,11,11, 1,11,11, 1},
    { 0, 0, 1, 5,11,11,11, 1,11, 1,11,11,11, 5,11, 1},
    { 0, 0, 1,11,11,11,11, 1,11, 1,11,11,11, 5, 5, 1},
    { 0, 1,11,11,11,11,11, 1,11, 1,11,11,11,11, 5, 1},
    { 1, 5,11,11,11, 5, 5,11,11,11, 5, 5,11,11,11, 1},
    { 1,11,11,11,11,11,11,11, 1,11,11,11,11,11,11, 1},
    { 1,11,11, 5,11,11,11,11, 1,11,11,11,11, 5,11, 1},
    { 1, 1,11, 5,11,11,11,11,11,11,11,11,11, 5, 1, 0},
    { 0, 1, 1, 1, 1,11,11,11,11,11,11,11,11, 1, 1, 0},
    { 1, 5, 5, 1, 1, 1,11,11,11,11,11,11, 5, 1, 1, 0},
    { 1, 5, 5, 5, 1, 1,11,11,11,11,11, 5, 1, 1, 0, 0},
    { 0, 1, 5, 5, 5, 5, 1, 5, 5, 5, 1, 1, 5, 5, 1, 0},
    { 0, 0, 1, 5, 5, 1, 1, 1, 1, 1, 1, 5, 5, 5, 5, 1},
    { 0, 0, 0, 1, 1, 1, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0}
};

int color(int x){
    if (x==1) return 0;
    else if (x==5) return 126;
    else if (x==11) return 210;
    else return 15;
}

void dote(int k,int l){
    int x;
    printf("\e[H\e[J\e[?7l");
    for (int i = 0; i < l; i++){
        printf("\n");
    }
    for (int i = 0; i < 16; i++){
        printf("%*s",k,"");
        for (int j = 0; j < 16; j++){
            if (l == 0){if(k%2==1){x = b[i][j];}else{x = a[i][j];}}else{if(k%2==1){x = b[i][15-j];}else{x = a[i][15-j];}}
            printf("\e[48;5;%dm", color(x));
            printf("  ");
            printf("\e[0m");
        }
        printf("\n");
    }
    usleep(125000);
}

void dote2(int k,int l){
    int x;
    printf("\e[H\e[J\e[?7l");
    for (int i = 0; i < k; i++){
        printf("\n");
    }
    for (int i = 0; i < 16; i++){
        printf("%*s",l,"");
        for (int j = 0; j < 16; j++){
            if (l == 0){if(k%2==1){x = b[i][j];}else{x = a[i][j];}}else{if(k%2==1){x = b[i][15-j];}else{x = a[i][15-j];}}
            printf("\e[48;5;%dm", color(x));
            printf("  ");
            printf("\e[0m");
        }
        printf("\n");
    }
    usleep(125000);
}